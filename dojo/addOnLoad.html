

<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojo.addOnLoad &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <link rel="top" title="The Dojo Toolkit - Reference Guide" href="../index.html" />
    <link rel="up" title="Dojo" href="contents.html" />
    <link rel="next" title="dojo.addOnUnload" href="addOnUnload.html" />
    <link rel="prev" title="dojo.addClass" href="addClass.html" />

    <link rel="stylesheet" href="../_static/css/site.css">
    <link rel="stylesheet" href="../_static/js/docs/resources/guide.css">
	<script type="text/javascript">
		dojoConfig = {
			async: true
		};
	</script>
    <script type="text/javascript" src="../_static/js/dojo/dojo.js"></script>
    <script type="text/javascript" src="../_static/js/docs/guide.js"></script>

  </head>
  <body>  

    <div class="document">
    <div id="accessibilityNode">
        <a href="#intro">Skip to Content</a> | <a href="#nav">Skip to Navigation</a>
    </div>
    <hr class="hide">
    <div id="page" class="docPage">
        <div id="header">
            <div class="container">
                <span id="logo"><a title="Home" href="http://dojotoolkit.org">
                    <img alt="Dojo Toolkit" src="../_static/images/logo.png"></a>
                </span>
                <ul id="navigation">
                    <li class="home"><a href="/"><span class="homeIcon"></span></a></li>
                    <li class="download"><a href="/download/">Download</a></li>
                    <li class="features"><a href="/features/">Features</a></li>
                    <li class="docs active"><a href="/documentation/">Documentation</a></li>
                    <li class="community"><a href="/community/">Community</a></li>
                    <li class="about"><a href="/blog/">Blog</a></li>
                </ul>
            </div>
        </div>
    
        <hr class="hide" />
    
        <div id="main">
            <div id="content" class="innerBox">
                <div class="pageTitleContainer">
                    <h1>Documentation</h1>
                    <ul class="subnav">
                        <li><a href="/documentation/"><span>Tutorials</span></a></li>
                        <li class="active"><a href="/reference-guide/"><span>Reference Guide</span></a></li>
                        <li><a href="/api/"><span>API Documentation</span></a></li>
                    </ul>
                </div>
                <div class="line">
                    <div class="unit size3of4 firstUnit">
                        <div class="spacer">
                            
  <div class="section" id="dojo-addonload">
<span id="id1"></span><h1>dojo.addOnLoad<a class="headerlink" href="#dojo-addonload" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>dojo.addOnLoad() has been deprecated in favor of the (equivalent) <a class="reference internal" href="ready.html#dojo-ready"><em>dojo.ready</em></a> function, and more recently, in favor of the <a class="reference internal" href="../loader/amd.html#loader-amd"><em>The AMD API</em></a>, and the <a class="reference internal" href="domReady.html#dojo-domready"><em>domReady! plugin</em></a>.</p>
<p>The documentation below is preserved for legacy purposes:</p>
</div>
<div class="section" id="old-documentation">
<h2>Old Documentation<a class="headerlink" href="#old-documentation" title="Permalink to this headline">¶</a></h2>
<p>dojo.addOnLoad is a fundamental aspect of using Dojo. Passing addOnLoad a function will register the function to run when the DOM is ready. This differs slightly from document.ready and body.onload in that addOnLoad waits until all dependencies (and their recursive dependencies) have loaded before firing.</p>
<p>Sooner or later, every JavaScript programmer tries something like this:</p>
<div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="nx">dayOfWeek</span> <span class="o">==</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">){</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">if(dayOfWeek == &quot;Sunday&quot;){
    document.musicPrefs.other.value = &quot;Afrobeat&quot;;
}</textarea></div><div class="highlight"><pre><span class="nt">&lt;form</span> <span class="na">name=</span><span class="s">&quot;musicPrefs&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">name=</span><span class="s">&quot;other&quot;</span><span class="nt">&gt;</span>
    ...
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;form name=&quot;musicPrefs&quot;&gt;
    &lt;input type=&quot;text&quot; name=&quot;other&quot;&gt;
    ...</textarea></div><p>It doesn&#8217;t work because the &#8220;other&#8221; control is not defined yet. You can move the code to the bottom of the page, but that removes the linear nature of HTML. If you&#8217;re reading the code, you want to zero in on a control, and see the code that influences it close by.</p>
<p>dojo.addOnLoad(...) defers script execution until all the HTML and modules are loaded. It is currently deprecated and replaced by the <a class="reference internal" href="ready.html#dojo-ready"><em>dojo.ready</em></a> function, and more recently, in favor of the <a class="reference internal" href="../loader/amd.html#loader-amd"><em>The AMD API</em></a>, and the <a class="reference internal" href="domReady.html#dojo-domready"><em>domReady! plugin</em></a>. When use Dojo 1.7+, you should require &#8216;dojo/ready&#8217; and use &#8216;ready((...))&#8217; function instead, or use the domReady AMD plugin. So this code:</p>
<div class="highlight"><pre><span class="c1">// Dojo 1.7+ (AMD, domReady plugin)</span>
<span class="kd">function</span> <span class="nx">setAfrobeat</span><span class="p">(){</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">setAfrobeat</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo 1.7+ (AMD, domReady plugin)
function setAfrobeat(){
   document.musicPrefs.other.value=&quot;Afrobeat&quot;;
}

require([&quot;dojo/domReady!&quot;], function(){
  setAfrobeat();
});</textarea></div><div class="highlight"><pre><span class="c1">// Dojo 1.7+ (AMD, dojo/ready module)</span>
<span class="kd">function</span> <span class="nx">setAfrobeat</span><span class="p">(){</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">){</span>
     <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
         <span class="nx">setAfrobeat</span><span class="p">();</span>
     <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo 1.7+ (AMD, dojo/ready module)
function setAfrobeat(){
   document.musicPrefs.other.value=&quot;Afrobeat&quot;;
}
require([&quot;dojo/ready&quot;], function(ready){
     ready(function(){
         setAfrobeat();
     });
});</textarea></div><p>conveniently replaces this code:</p>
<div class="highlight"><pre><span class="c1">// Dojo &lt;1.7</span>
<span class="kd">function</span> <span class="nx">setAfrobeat</span><span class="p">(){</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="nx">setAfrobeat</span><span class="p">);</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo &lt;1.7
function setAfrobeat(){
   document.musicPrefs.other.value=&quot;Afrobeat&quot;;
}
dojo.addOnLoad(setAfrobeat);</textarea></div><p>When the function is small, you may prefer to write it inline:</p>
<div class="highlight"><pre><span class="c1">// Dojo 1.7+ (AMD, domReady plugin)</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(){</span>
   <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo 1.7+ (AMD, domReady plugin)
require([&quot;dojo/domReady!&quot;], function(){
   document.musicPrefs.other.value=&quot;Afrobeat&quot;;
});</textarea></div><div class="highlight"><pre><span class="c1">// Dojo 1.7+ (AMD, dojo/ready module)</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">){</span>
  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo 1.7+ (AMD, dojo/ready module)
require([&quot;dojo/ready&quot;], function(ready){
  ready(function(){
    document.musicPrefs.other.value=&quot;Afrobeat&quot;;
  });
});</textarea></div><div class="highlight"><pre><span class="c1">// Dojo &lt;1.7</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">musicPrefs</span><span class="p">.</span><span class="nx">other</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="s2">&quot;Afrobeat&quot;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo &lt;1.7
dojo.addOnLoad(function(){
    document.musicPrefs.other.value=&quot;Afrobeat&quot;;
});</textarea></div><p>This is the function literal or anonymous function construct of JavaScript. If it looks really, really weird to you, take a peek ahead at Functions as Variables for an explanation.</p>
<p>Another use is &#8220;embedded onLoad&#8221;. We&#8217;ll define an addOnLoad function (anonymous), and within that function will load more components, registering a second addOnLoad function. The first will execute very quickly (assuming you are only loading dojo.js), and the second will wait until the package dependencies are complete:</p>
<div class="highlight"><pre><span class="c1">// Dojo 1.7 (AMD)</span>
<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">){</span>
    <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit/Dialog&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/TitlePane&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Dialog</span><span class="p">,</span> <span class="nx">TitlePane</span><span class="p">){</span>
            <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                <span class="c1">// dijit.Dialog and friends are ready, create one from a node with id=&quot;bar&quot;</span>
                <span class="kd">var</span> <span class="nx">dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dialog</span><span class="p">({</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Lazy Loaded&quot;</span> <span class="p">},</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo 1.7 (AMD)
require([&quot;dojo/ready&quot;], function(ready){
    ready(function(){
        require([&quot;dijit/Dialog&quot;, &quot;dijit/TitlePane&quot;], function(Dialog, TitlePane){
            ready(function(){
                // dijit.Dialog and friends are ready, create one from a node with id=&quot;bar&quot;
                var dialog = new Dialog({ title:&quot;Lazy Loaded&quot; }, &quot;bar&quot;);
            });
        });
    });
});</textarea></div><div class="highlight"><pre><span class="c1">// Dojo &lt;1.7</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.Dialog&quot;</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.TitlePane&quot;</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// dijit.Dialog and friends are ready, create one from a node with id=&quot;bar&quot;</span>
        <span class="kd">var</span> <span class="nx">dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">Dialog</span><span class="p">({</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Lazy Loaded&quot;</span> <span class="p">},</span> <span class="s2">&quot;bar&quot;</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo &lt;1.7
dojo.addOnLoad(function(){
    dojo.require(&quot;dijit.Dialog&quot;);
    dojo.require(&quot;dijit.TitlePane&quot;);
    dojo.addOnLoad(function(){
        // dijit.Dialog and friends are ready, create one from a node with id=&quot;bar&quot;
        var dialog = new dijit.Dialog({ title:&quot;Lazy Loaded&quot; }, &quot;bar&quot;);
    });
});</textarea></div><p>If no in-flight XHR activity is found, and all dependencies have been solved, addOnLoad functions fire immediately.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s dynamically include code on button press and fire an event once the code is included:</p>
<div data-dojo-type="docs.MiniGlass" class="CodeGlassMini" type="dialog" pluginArgs="{dojoConfig:'parseOnLoad: true', version:''}" width="700" height="400" toolbar=""><div class="CodeGlassMiniInner"><p>The HTML markup is pretty simple, just a button to click on</p>
<div class="highlight"><pre><span class="nt">&lt;button</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.Button&quot;</span> <span class="na">id=</span><span class="s">&quot;buttonOne&quot;</span><span class="nt">&gt;</span>Click me!<span class="nt">&lt;/button&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;button data-dojo-type=&quot;dijit.form.Button&quot; id=&quot;buttonOne&quot;&gt;Click me!&lt;/button&gt;</textarea></div><p>The JavaScript code fires a dojo.require when you click the button.</p>
<div class="highlight"><pre><span class="c1">// Dojo &lt;1.7</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.form.Button&quot;</span><span class="p">);</span>

<span class="c1">// connect to button</span>
<span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">dojo</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;buttonOne&quot;</span><span class="p">),</span> <span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="s2">&quot;loadCode&quot;</span><span class="p">);</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">loadCode</span><span class="p">(){</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;About to dojo.require dijit.layout.BorderContainer.&quot;</span><span class="p">);</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dijit.layout.BorderContainer&quot;</span><span class="p">);</span>

    <span class="c1">// add a dojo.addOnLoad</span>
    <span class="nx">dojo</span><span class="p">.</span><span class="nx">addOnLoad</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;This fires after BorderContainer is included. Now it is: &quot;</span> <span class="o">+</span> <span class="nx">dijit</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">BorderContainer</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">// Dojo &lt;1.7
dojo.require(&quot;dijit.form.Button&quot;);

// connect to button
dojo.addOnLoad(function(){
    dojo.connect(dojo.byId(&quot;buttonOne&quot;), &quot;onclick&quot;, &quot;loadCode&quot;);
});

function loadCode(){
    alert(&quot;About to dojo.require dijit.layout.BorderContainer.&quot;);
    dojo.require(&quot;dijit.layout.BorderContainer&quot;);

    // add a dojo.addOnLoad
    dojo.addOnLoad(function(){
        alert(&quot;This fires after BorderContainer is included. Now it is: &quot; + dijit.layout.BorderContainer);
    });
}</textarea></div></div></div></div>
</div>


                        </div>
                    </div>
                    <div class="sidebar unit size1of4 lastUnit">
                        <h4>Reference Guide</h4>
						<div id="dtkVersion">
							<label for="refver">Dojo Version</label>
							<select id="refver" name="refver">
								<option value="1.6">1.6</option>
								<option value="1.7">1.7</option>
								<option value="1.8" selected="selected">1.8</option>
                                <option value="1.9">1.9</option>
							</select>
						</div>
                        <ul>
                            <li><a href="../index.html">Startpage</a></li>
                            <li><a href="index.html">Dojo</a></li>
                            <li><a href="../dijit/index.html">Dijit</a></li>
                            <li><a href="../dojox/index.html">DojoX</a></li>
                        </ul>
                        
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">dojo.addOnLoad</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#old-documentation">Old Documentation</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="addClass.html"
                        title="previous chapter">dojo.addClass</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="addOnUnload.html"
                        title="next chapter">dojo.addOnUnload</a></p>
    <div id="searchbox" style="display: none">
        <h3>Quick search</h3>
        <form class="search" action="../search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
         </form>
         <p class="searchtip" style="font-size: 90%">
             Enter search terms or a module, class or function name.
         </p>
    </div>
        </div>
      </div>
                    </div>
                </div>
            </div>
        </div>
        <hr class="hide" />
        <div id="foot">
            <div class="innerBox">
                <script type="text/javascript">document.write('<a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&amp;formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&amp;entry_0=' + encodeURIComponent(window.location.href) + '">Error in the documentation? Can’t find what you are looking for? Let us know!</a>');</script>
                <div class="footer">
                      &copy; Copyright 2005-2012, Dojo Foundation.
                      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
                </div>
            </div>  
        </div>
        <script src="http://www.google.com/jsapi?key=ABQIAAAAbTW5DVaTIHKHQe5Q75sB0BSaOaO_TgJ5c3mtQFnk5JO2zD5dZBSGHlRJ8HAPlCQCEO_FxSmyNAHSLw" type="text/javascript"></script>
    </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>